---
import { useTranslations, type Lang } from '../i18n';

interface Props {
  lang?: Lang;
}

const { lang = 'pt' } = Astro.props;
const t = useTranslations(lang);

const base = import.meta.env.BASE_URL.replace(/\/$/, '');

const ctas = [
  { label: t('btn.github'), href: 'https://github.com/jrmarcello', variant: 'primary' },
  { label: t('btn.linkedin'), href: 'https://www.linkedin.com/in/marcelo-jr-9698874a', variant: 'ghost' },
  { label: t('btn.resume'), href: `/${lang}/resume`, variant: 'ghost' }
];

const signalCards = [
  { label: t('hero.availability'), value: lang === 'pt' ? 'Consultor & PJ' : 'Consultant & Contractor', detail: t('hero.availabilityDesc') },
  { label: t('bento.location'), value: t('hero.location'), detail: t('hero.locationDesc') },
  { label: t('hero.certifications'), value: t('hero.certValue'), detail: t('hero.certDetail'), badge: 'https://www.credly.com/badges/0d0332c2-5ce2-4192-aee3-dcaeb2d06c88/public_url' }
];
---

<section class="relative overflow-hidden rounded-bento border border-white/5 bg-surface-900/70 p-8 shadow-card">
  <div class="pointer-events-none absolute inset-x-0 top-0 h-1/2 opacity-60" aria-hidden="true">
    <div class="h-full bg-gradient-to-r from-primary-600/30 via-accent-500/20 to-primary-400/20 blur-3xl"></div>
  </div>
  <div class="relative grid gap-8 lg:grid-cols-[3fr,2fr]">
    <div class="space-y-6">
      <div class="flex items-start justify-between gap-6">
        <div class="space-y-6">
          <p class="text-xs uppercase tracking-[0.6em] text-neutral-500">{t('hero.role')}</p>
          <h1 class="text-4xl leading-tight text-neutral-50 md:text-5xl">
            {t('hero.headline')}
          </h1>
        </div>
        <img src={`${base}/profile.jpg`} alt="Marcelo Jr" class="hidden h-20 w-20 flex-shrink-0 rounded-full border-2 border-primary-500/50 shadow-lg lg:block" />
      </div>
      <p class="max-w-2xl text-lg text-neutral-200">
        {t('hero.description')}
      </p>
      <div class="flex flex-wrap gap-3">
        {ctas.map((cta) => {
          const baseClasses = 'inline-flex items-center gap-2 rounded-full px-5 py-2 text-sm font-semibold transition hover:-translate-y-0.5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-500';
          const variantClasses = cta.variant === 'primary'
            ? 'bg-primary-600 text-white shadow-glow'
            : 'border border-white/20 bg-surface-800/60 text-neutral-100';

          return (
            <a
              class={`${baseClasses} ${variantClasses}`}
              href={cta.href}
              target={cta.href.startsWith('http') ? '_blank' : undefined}
              rel={cta.href.startsWith('http') ? 'noreferrer' : undefined}
            >
              <span>{cta.label}</span>
              <svg class="h-3.5 w-3.5" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M3 11L11 3" />
                <path d="M5 3H11V9" />
              </svg>
            </a>
          );
        })}
      </div>
    </div>

    <div class="grid gap-4">
      {signalCards.map(({ label, value, detail, badge }) => (
        <article class="rounded-2xl border border-white/10 bg-surface-950/70 p-4">
          <p class="text-xs uppercase tracking-[0.4em] text-neutral-500">{label}</p>
          {badge ? (
            <a href={badge} target="_blank" rel="noreferrer" class="group flex items-center gap-3">
              <img src={`${base}/aws-saa-badge.png`} alt="AWS Solutions Architect Associate Badge" class="h-12 w-12" />
              <div>
                <p class="text-lg font-mono text-primary-300 group-hover:text-primary-200">{value}</p>
                <p class="text-sm text-neutral-300">{detail}</p>
              </div>
            </a>
          ) : (
            <>
              <p class="text-xl font-mono text-primary-300">{value}</p>
              <p class="text-sm text-neutral-300">{detail}</p>
            </>
          )}
        </article>
      ))}
    </div>
  </div>
</section>
